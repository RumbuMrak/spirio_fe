import Image from 'next/image';import React from 'react';import { cn, getImageUrl, guideName } from '@/services/utils';import { GuideProfileType } from '@/features/user/types/user';import Button from '../UI/button/Button';import { route } from '@/services/routes';import Link from 'next/link';import router from 'next/router';import { Calendar, Chat, PhoneCall, VideoCamera } from '@phosphor-icons/react';import useBreakpoint from '@/hooks/useBreakpoint';import RatingBox from './RatingRank';const GuideCard: (props: GuideProfileType & { className?: string, hide_description?: boolean }) => JSX.Element = (props) => {  const { className, hide_description, ...guide } = props;  const { id, avatar } = guide;  const { isInBreakpoint } = useBreakpoint();  const isSmallScreen = !isInBreakpoint({ from: 'sm' });  const isOnline =    guide.call_status === 'online' ||    guide.call_status === 'chat-online' ||    guide.call_status === 'audio-online' ||    guide.call_status === 'chat-audio-online' ||    guide.call_status === 'chat-video-online' ||    guide.call_status === 'all-online';  const status = guide.call_status;  const isVideoEnabled =    status === 'online' ||    status === 'chat-video-online' ||    status === 'all-online';  const isAudioEnabled =    status === 'online' ||    status === 'audio-online' ||    status === 'chat-audio-online' ||    status === 'all-online';  const isChatEnabled =    status === 'chat-online' ||    status === 'chat-audio-online' ||    status === 'chat-video-online' ||    status === 'all-online';  return (    <div      role={!hide_description ? 'button' : undefined}      tabIndex={!hide_description ? 0 : undefined}      aria-label={!hide_description ? `Zobrazit detail průvodce ${guideName(guide)}` : undefined}      onClick={() => {        if (!hide_description) {          router.push(route.discoverDetail(id));        }      }}      onKeyDown={(e) => {        if (!hide_description && (e.key === 'Enter' || e.key === ' ')) {          e.preventDefault();          router.push(route.discoverDetail(id));        }      }}      className={cn(        'cursor-pointer hover:ring-1 hover:ring-[#EC994D] relative flex flex-shrink-0 h-full w-full auto-rows-fr flex-col gap-3.5 overflow-hidden rounded-lg bg-gradient-to-br from-[#B526D6] to-[#DF7E60] p-0 sm:p-0',        className      )}    >      <div className="relative w-full flex justify-center">        <div className="relative w-full aspect-square min-h-[96px] overflow-hidden rounded-lg bg-white/20">          <Image            src={              avatar                ? getImageUrl(avatar)                : 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='            }            fill            className="object-cover object-center"            alt={guideName(guide)}          />          <div className="absolute top-2 right-2">            <RatingBox rating={guide.rating ?? 4.6} />          </div>        </div>        <Button          href={route.discoverDetail(id)}          className={cn(            'absolute -bottom-3 left-1/2 -translate-x-1/2 px-3 py-0.5 text-[10px] font-semibold rounded-md min-w-32',            'text-white whitespace-nowrap bg-gradient-to-r',            isOnline              ? 'from-[#D5F65F] to-[#6B8E23] text-[#252F04]'              : guide.call_status === 'busy'                ? 'from-[#0E7490] to-[#0A4F6C] text-[#E5E7EB]'                : 'from-[#EC994D] to-[#B77906] text-[#500D0D]'          )}          size="xs"        >          {isOnline            ? 'Online'            : guide.call_status === 'busy'              ? 'Obsazeno'              : 'Rezervujte termín'}        </Button>      </div>      <div className="flex grow flex-col items-center text-center">        <div className="text-lg font-600 sm:text-xl mt-1 mb-3  [text-shadow:2px_2px_4px_rgba(0,0,0,0.6)]">{guideName(guide)}</div>        {guide.techniques && (          <div className="flex flex-wrap justify-center gap-1 text-xs text-white px-5">            {guide.techniques              .filter((tech) => tech.title.length <= 18)              .slice(0, 3)              .map((tech, idx) => (                <span key={idx} className="bg-white/20 rounded-full px-2">                  {tech.title}                </span>              ))}          </div>        )}        {hide_description && (          <p className="mb-3.5 mt-4 text-s px-2">            {(() => {              return (                <>                  {}                  {}                  <Link                    href={route.discoverDetail(id)}                    className="ml-1 text-white text-gradient hover:text-primary-800"                  >                    Více o mně                  </Link>                  {}                </>              );            })()}          </p>        )}        <div className="flex justify-between items-center text-sm gap-4 text-white/90 mt-4 border-t border-white/10 pt-3 pb-4">          {}          <div className="flex-1 text-center">            <div className="font-semibold"><Link              href={route.discoverDetail(id)}              className="ml-1 text-white underline hover:text-primary-800"            >              Více o mně            </Link></div>            <div className="text-xs text-white/60 mt-1"></div>          </div>        </div>        <div className="flex justify-center gap-2 mt-auto mb-2 sm:w-full w-28">          {[            {              icon: <Chat size={20} weight="fill" className="text-[#FCD34D]  w-4 h-4 sm:w-5 sm:h-5" />,              onClick: isChatEnabled                ? () =>                  router.push(route.discoverDetail(id))                : undefined,              disabled: !isChatEnabled,              name: 'Chat',            },            {              icon: <PhoneCall size={20} weight="fill" className="text-[#38BDF8]  w-4 h-4 sm:w-5 sm:h-5" />,              onClick: isAudioEnabled                ? () =>                  router.push(route.discoverDetail(id))                : undefined,              disabled: !isAudioEnabled,              name: 'Audio',            },            {              icon: <VideoCamera weight="fill" size={20} className="text-[#B6DC36] w-4 h-4 sm:w-5 sm:h-5" />,              onClick: isVideoEnabled                ? () =>                  router.push(route.discoverDetail(id))                : undefined,              disabled: !isVideoEnabled,              name: 'Video',            },            {              icon: <Calendar size={20} weight="fill" className="text-white w-4 h-4 sm:w-5 sm:h-5" />,              onClick: () =>                router.push(route.discoverDetail(id)),              name: 'Rezervace',            },          ].map(({ icon, onClick, disabled, name }, idx) => (            (              <div key={idx} className="flex flex-col items-center space-y-1">                <Button                  key={idx}                  onClick={(e: React.MouseEvent<HTMLButtonElement>) => {                    e.stopPropagation();                    if (onClick) onClick();                  }}                  disabled={disabled}                  className={cn(                    '!rounded-md sm:min-h-[15px] sm:max-w-[15px] sm:!border sm:!border-primary-650/30 !bg-transparent sm:!bg-primary-725/30 shadow-sm  !sm:bg-primary-725/25 transition p-1 sm:p-2 w-10 h-10 sm:w-12 sm:h-12 flex items-center',                    'p-1 sm:p-2',                    disabled && 'opacity-10 cursor-not-allowed'                  )}                  size={isSmallScreen ? 'xs' : undefined}>                  {}                  {disabled ? (                    <span className="opacity-20">{icon}</span>                  ) : (                    <span>{icon}</span>                  )}                </Button>                {disabled ? (                  <span className="text-xs hidden sm:block   sm:!text-black/40 opacity-80">{name}</span>                ) : (                  <span className="text-xs hidden sm:block sm:text-white">{name}</span>                )}              </div>            )))}        </div>      </div>  </div>  );};export default GuideCard;